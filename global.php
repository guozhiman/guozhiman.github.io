<?php if(is_file('install.php'))exit(header('location:install.php'));define('XQ_DEBUG', 0);error_reporting(XQ_DEBUG ? E_ALL : 0);if(isset($_REQUEST['GLOBALS']) || isset($_FILES['GLOBALS'])) exit('Request Denied');@set_magic_quotes_runtime(0);$MQG = get_magic_quotes_gpc();foreach(array('_POST', '_GET') as $R) {if($$R) { foreach($$R as $k=>$v) { if(isset($$k) && $$k == $v) unset($$k); } }}define('IN_XQCMS', true);define('XQ_ROOT', str_replace("\\", '/', dirname(__FILE__)));define('XQ_SYSROOT', XQ_ROOT.'/xq'.'cms');require XQ_SYSROOT.'/xqcms.php';require XQ_ROOT.'/web.config.php';define('XQ_PATH', $WEB['absurl'] ? $WEB['url'] : $WEB['path']);define('XQ_CHMOD', $WEB['filemod'] ? $WEB['filemod'] : '');define('XQ_URL', $WEB['url']);define('XQ_LANG', $WEB['language']);define('XQ_CHARSET', $WEB['charset']);define('XQ_CACHE', XQ_ROOT.'/data/caches');define('XQ_STYLE', XQ_PATH.'style/'.$WEB['style'].'/');define('XQ_JS', XQ_PATH.'data/js/');define('errmsg', 'Invalid Request');$L = array();include XQ_SYSROOT.'/languages/'.XQ_LANG.'/lang.php';XQcms::load_xq_func('global');define('XQ_COOKPER','xqcms_');if(!$MQG && $_POST) $_POST = daddslashes($_POST);if(!$MQG && $_GET) $_GET = daddslashes($_GET);$XQ_PRE = $WEB['tbpre'];$XQ_QST = $_SERVER['QUERY_STRING'];$XQ_TIME = time() + $WEB['timediff'];$XQ_IP = get_env('ip');$XQ_URL = get_env('url');$XQ_REF = get_env('referer');if(function_exists('date_default_timezone_set')) date_default_timezone_set($WEB['timezone']);header("Content-Type:text/html;charset=".XQ_CHARSET);XQcms::load_xq_class($WEB['dbtype']);XQcms::load_xq_class('session');XQcms::load_xq_func('file');if(!defined('XQ_ADMIN')) {if(!empty($_SERVER['REQUEST_URI'])) {$uri = urldecode($_SERVER['REQUEST_URI']);if(strpos($uri, '<') !== false || strpos($uri, '"') !== false || strpos($uri, '0x') !== false) dalert(errmsg, 'goback');}if($_POST) $_POST = strip_sql($_POST);if($_GET) $_GET = strip_sql($_GET);$xqcms_task = '';}if($_POST) extract($_POST, EXTR_SKIP);if($_GET) extract($_GET, EXTR_SKIP);$db_class = 'db_'.$WEB['dbtype'];$db = new $db_class;$db->halt = defined('XQ_ADMIN')?1:(XQ_DEBUG ? 1 : 0);$db->pre = $WEB['tbpre'];$db->connect($WEB['dbhost'], $WEB['dbuser'], $WEB['dbpass'], $WEB['dbname'],$WEB['dbcharset'], $WEB['pconnect']);$XQ = $DEXT = $DCAT = $XQM = $MOD = array();$CACHE = cache_read('module.php');if(!$CACHE) {XQcms::load_xq_func('admin');XQcms::load_xq_func('cache');cache_all();$CACHE = cache_read('module.php');}$XQ = $CACHE['xq'];$MODULE = $CACHE['module'];if(!defined('XQ_ADMIN')) {if($XQ['close']) message($XQ['close_reason'].'&nbsp;');}unset($CACHE, $WEB['timezone'], $WEB['dbhost'], $WEB['dbuser'], $WEB['dbpass'], $db_class);if(!isset($moduleid)) {$moduleid = 1;$module = 'xqcms';} else if($moduleid == 1) {$module = 'xqcms';} else {$moduleid = intval($moduleid);isset($MODULE[$moduleid]) or dheader(XQ_PATH);$module = $MODULE[$moduleid]['module'];$MOD = cache_read('module-'.$moduleid.'.php');include XQ_SYSROOT.'/languages/'.XQ_LANG.'/'.$module.'.lang.php';}($XQ['gzip_enable'] && !$_POST&& !headers_sent()) ? ob_start('ob_gzhandler') : ob_start();$forward = isset($forward) ? urldecode($forward) : $XQ_REF;$action = isset($action) ? trim($action) : '';$submit = isset($_POST['submit']) ? true : false;if($submit) isset($captcha) or $captcha = '';$page = isset($page) ? max(intval($page), 1) : 1;$catid = isset($catid) ? intval($catid) : 0;$id = isset($id) ? (is_array($id) ? $id : intval($id)) : 0;$pagesize = $XQ['pagesize'] ? $XQ['pagesize'] : 20;$offset = ($page-1)*$pagesize;$kw = isset($kw) ? htmlspecialchars(str_replace(array("\'"), array(''), trim(urldecode($kw)))) : '';$seo_title = $head_title = $head_keywords = $head_description = '';$head_keywords = $XQ['seo_keywords'];$head_description = $XQ['seo_description'];?>