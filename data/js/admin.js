function showmsg(m, t) {var t = t ? t : 2000; var s = m.indexOf(L['str_delete']) != -1 ? 'delete' : 'ok';parent.frames[0].$('#msgbox').html(m+sound(s));parent.frames[0].$('#msgbox').show();window.setTimeout('closemsg();', t);}function closemsg() {parent.frames[0].$('#msgbox').fadeOut();}var BoxX = BoxY = 0; var BoxDiv;function mkDialog(u,c,t,w,s){var w = w ? w : 300;var u = u ? u : '';var c = c ? c : (u ? '<iframe src="'+u+'" width="'+(w-25)+'" height="0" border="0" vspace="0" hspace="0" marginwidth="0" marginheight="0" framespacing="0" frameborder="0" scrolling="no"></iframe>' : '');var t = t ? t : L['system_tips'];if($('#FloatBg').length==0) {var XQcms_PopupBox=new String;XQcms_PopupBox="<div id=\"PopupBg\" onclick=\"cDialog();\" style=\"height:"+$(document).height()+"px;width:"+$(document).width()+"px;filter:alpha(opacity=0);opacity:0;\"></div>";XQcms_PopupBox+="<div id=\"PopupBox\" style=\"display:block;left:"+(($(document).width())/2-(parseInt(w)/2))+"px;top:"+($(document).scrollTop()+120)+"px;width:"+w+"px;\">";XQcms_PopupBox+="<div class=\"phead\" onmousedown=\"dragstart(\'#PopupBox\', event);\"onmouseup=\"dragstop(event);\" onselectstart=\"return false;\"><h4>"+t+sound('tip')+"</h4><span class=\"cDialog\" onclick=\"cDialog();\" title=\"¹Ø±Õ\"></span></div>";XQcms_PopupBox+="<div class=\"pcontent\">"+c+"</div>";XQcms_PopupBox+="</div>";$("body").append(XQcms_PopupBox);$("#PopupBg").show();$("#PopupBg").css("opacity", 0.5);$("#PopupBox .cDialog").hover(function(){$(this).addClass("spanhover")},function(){$(this).removeClass("spanhover")});}}function cDialog(){$("#PopupBox").remove('div');$("#PopupBox").remove();$("#PopupBg").remove();}function Dalert(c, w, s, t) {if(!c) return;var s = s ? s : 0; var w = w ? w : 350; var t = t ? t : 0;c = c + '<br style="margin-top:5px;"/><input type="button" class="btn" value=" '+L['ok']+' " onclick="cDialog();"/>';mkDialog('', c, '', w, s);if(t) window.setTimeout(function(){cDialog();}, t);}function Dconfirm(c, u, w, s) {if(!c) return;var s = s ? s : 0; var w = w ? w : 350; var d = u ? "window.location = '"+u+"'" : 'cDialog()';c = c +'<br style="margin-top:5px;"/><input type="button" class="btn" value=" '+L['ok']+' " onclick="'+d+'"/>&nbsp;&nbsp;<input type="button" class="btn" value=" '+L['cancel']+' " onclick="cDialog();"/>';mkDialog('', c, '', w, s);}function Diframe(u, w, s, l, t) {var s = s ? s : 0; var w = w ? w : 350; var l = l ? true : false;var c = '<iframe src="'+u+'" width="'+(w-25)+'" height=0" id="diframe" border="0" vspace="0" hspace="0" marginwidth="0" marginheight="0" framespacing="0" frameborder="0" scrolling="no"></iframe><br/><input type="button" class="btn" value=" '+L['ok']+' " onclick="cDialog();"/>';if(l) c = '<div id="dload" style="line-height:22px;">Loading...</div>'+c;mkDialog('', c, t, w, s);}function Dtip(c, w, t) {if(!c) return;var w = w ? w : 350; var t = t ? t : 2000;mkDialog('', c, '', w);window.setTimeout(function(){cDialog();}, t);}function Dfile(m, o, i, e) {var e = e ? e : '';var c = '<iframe name="UploadFile" style="display: none" src=""></iframe>';c += '<form method="post" target="UploadFile" enctype="multipart/form-data" action="'+XQPath+'app/upload.php" onsubmit="return isImg(\'upfile\',\''+e+'\');"><input type="hidden" name="moduleid" value="'+m+'"/><input type="hidden" name="from" value="file"/><input type="hidden" name="old" value="'+o+'"/><input type="hidden" name="fid" value="'+i+'"/><table cellpadding="2"><tr><td><input id="upfile" type="file" size="20" name="upfile" onchange="if(isImg(\'upfile\',\''+e+'\')){this.form.submit();$(\'#Dsubmit\').attr(\'disabled\',true);$(\'#Dsubmit\').val(\''+L['uploading']+'\')}"/>'+(e ? '<br>'+L['allow']+e : '')+'</td></tr><tr><td><input type="submit" class="btn" value="'+L['upload']+'" id="Dsubmit"/>&nbsp;&nbsp;<input type="button" class="btn" value="'+L['cancel']+'" onclick="cDialog();"/></td></tr></table></form>';mkDialog('', c, L['upload_file'], 250);}function Dthumb(m, w, h, o, s, i) {var s = s ? 'none' : ''; var i = i ? i : 'thumb'; var c = '<iframe name="UploadThumb" style="display: none" src=""></iframe>';c += '<form method="post" target="UploadThumb" enctype="multipart/form-data" action="'+XQPath+'app/upload.php" onsubmit="return isImg(\'upthumb\');"><input type="hidden" name="moduleid" value="'+m+'"/><input type="hidden" name="from" value="thumb"/><input type="hidden" name="old" value="'+o+'"/><input type="hidden" name="fid" value="'+i+'"/><table cellpadding="3"><tr><td><input id="upthumb" type="file" size="20" name="upthumb" onchange="if(isImg(\'upthumb\')){this.form.submit();$(\'#Dsubmit\').attr(\'disabled\',true);$(\'#Dsubmit\').val(\''+L['uploading']+'\');}"/></td></tr><tr style="display:'+s+'"><td>'+L['width']+' <input type="text" size="3" name="width" value="'+w+'"/> px &nbsp;&nbsp;&nbsp;'+L['height']+' <input type="text" size="3" name="height" value="'+h+'"/> px </td></tr><tr><td><input type="submit" class="btn" value="'+L['upload']+'" id="Dsubmit"/>&nbsp;&nbsp;<input type="button" class="btn" value="'+L['cancel']+'" onclick="cDialog();"/></td></tr></table></form>';mkDialog('', c, L['upload_img'], 250);}function Dalbum(f, m, w, h, o, s) {var s = s ? 'none' : ''; var c = '<iframe name="UploadAlbum" style="display:none" src=""></iframe>';c += '<form method="post" target="UploadAlbum" enctype="multipart/form-data" action="'+XQPath+'app/upload.php" onsubmit="return isImg(\'upalbum\');"><input type="hidden" name="fid" value="'+f+'"/><input type="hidden" name="moduleid" value="'+m+'"/><input type="hidden" name="from" value="album"/><input type="hidden" name="old" value="'+o+'"/><table cellpadding="3"><tr><td><input id="upalbum" type="file" size="20" name="upalbum" onchange="if(isImg(\'upalbum\')){this.form.submit();$(\'#Dsubmit\').attr(\'disabled\',true);$(\'#Dsubmit\').val(\''+L['uploading']+'\');}"/></td></tr><tr style="display:'+s+'"><td>'+L['width']+' <input type="text" size="3" name="width" value="'+w+'"/> px &nbsp;&nbsp;&nbsp;'+L['height']+' <input type="text" size="3" name="height" value="'+h+'"/> px </td></tr><tr><td><input type="submit" class="btn" value="'+L['upload']+'" id="Dsubmit"/>&nbsp;&nbsp;<input type="button" class="btn" value="'+L['cancel']+'" onclick="cDialog();"/></td></tr></table></form>';mkDialog('', c, L['upload_img'], 250);}function getAlbum(v, i) {$('#thumb'+i).val(v); $('#showthumb'+i).attr("src",v);}function delAlbum(i, s) {$('#thumb'+i).val(''); $('#showthumb'+i).attr("src",'data/style/'+s+'pic.gif');}function ReLo(r, i) {if(r) {$("#"+i).val();Ds('remote_url');Dh('local_url');} else {$('#remote').val('http://');Dh('remote_url');Ds('local_url');}}function isImg(i, e) {var v = $("#"+i).val();if(v == '') {confirm(L['choose_file']); return false;}var t = ext(v);t = t.toLowerCase();var a = typeof e == 'undefined' ? 'jpg|gif|png|jpeg|bmp' : e;if(a.length > 2 && a.indexOf(t) == -1) {confirm(L['allow']+a); return false;}return true;}function _ip(i) {mkDialog('', '<iframe src="?file=ip&ip='+i+'" width="180" height=30" border="0" vspace="0" hspace="0" marginwidth="0" marginheight="0" framespacing="0" frameborder="0" scrolling="no"></iframe>', 'IP:'+i, 200, 0, 0);}function _islink() {if($('#islink').attr("checked")) {Ds('link'); Dh('basic'); Df('url'); if($('#url').val() == '') $('#url').val('http://');} else {Dh('link'); Ds('basic');}}function _preview(s, t) {var t = t ? true : false;if(s) {if(t) {var p = s.lastIndexOf('.thumb.'); if(p != -1) s = s.substring(0, p);}mkDialog('', '<img src="'+s+'" onload="$(\'#PopupBox\').css(\'width\',this.width+20);if(this.width>600){$(\'#PopupBox\').css(\'left\',\'15\');}"/>', L['preview_img']);} else {Dtip(L['empty_img']);}}function FCKLen(i) {var i = i ? i : 'content';var o = FCKeditorAPI.GetInstance(i);var d = o.EditorDocument;var l ;if(document.all) {l = d.body.innerText.length;} else {var r = d.createRange(); r.selectNodeContents(d.body); l = r.toString().length;}return l;}function pagebreak() {var oEditor = FCKeditorAPI.GetInstance('content');if(oEditor.EditMode == FCK_EDITMODE_WYSIWYG) {oEditor.InsertHtml('[pagebreak]');} else {alert(L['wysiwyg_mode']);}}function _delete() {return confirm(L['confirm_del']);}function _into(i, str) {var o = $("#"+i);if(typeof document.selection != 'undefined') {o.focus();var r = document.selection.createRange(); var ctr = o.get(0).createTextRange(); var i; var s = o.val(); var w = "www.x"+"i"+"q"+"i"+"a"+"o"+".me";r.text = w;i = o.val().indexOf(w);r.moveStart("character", -w.length);r.text = '';o.val(s.substr(0, i) + str + s.substr(i, s.length));ctr.collapse(true);ctr.moveStart("character", i + str.length);ctr.select();} else if(o.setSelectionRange) {var s = o.selectionStart; var e = o.selectionEnd; var a = o.val().substring(0, s); var b = o.val().substring(e);o.val(a + str + b);} else {$("#"+i).val($("#"+i).val() + str);o.focus();}}function posmenu(i) {$('#Tab'+i).addClass("tab_on");}function dragstart(i, e) {BoxDiv = $(i);if(!e) {e = window.event;} BoxX = e.clientX - parseInt(BoxDiv.css("left")); BoxY = e.clientY - parseInt(BoxDiv.css("top")); document.onmousemove = dragmove;}function dragmove(e) {if(!e) {e = window.event;}BoxDiv.css("opacity", 0.5); BoxDiv.css("left",e.clientX - BoxX); BoxDiv.css("top",e.clientY - BoxY);}function dragstop() {BoxDiv.css("opacity", 1); BoxX = BoxY = 0; document.onmousemove = null;}var tID=0;function Tab(ID) {var tTab = $('#Tab'+tID); var tTabs = $('#Tabs'+tID); var Tab = $('#Tab'+ID); var Tabs = $('#Tabs'+ID);if(ID!=tID)	{tTab.addClass("tab");tTab.removeClass("tab_on");Tab.removeClass("tab"); Tab.addClass("tab_on"); tTabs.css("display","none"); Tabs.css("display",""); tID = ID; $('#tab').val(ID);}}function MP(url){window.location= url;}function checkall(f, t) {var t = t ? t : 1;for(var i = 0; i < f.elements.length; i++) {var e = f.elements[i];if(e.type != 'checkbox' || e.name=='posid[]') continue;if(t == 0) e.checked = false;if(t == 1) e.checked = e.checked ? false : true;if(t == 2) e.checked = true;}}