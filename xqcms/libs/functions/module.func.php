<?php defined('IN_XQCMS') or exit('Access Denied');function get_intro($content, $length = 0) {return $length ? showShort(preg_replace("/&([a-z]{1,});/", '', dtrim(strip_tags($content))), $length) : '';}function get_description($content, $length) {if($length) {$content = str_replace(array(' ', '[pagebreak]'), array('', ''), $content);return nl2br(showShort(trim(strip_tags($content)), $length, '...'));} else {return '';}}function cache_item($moduleid) {global $db;$data = array();$query = $db->query("SELECT catid,items FROM {$db->pre}category WHERE moduleid='$moduleid' ORDER BY listorder,catid");while($r = $db->fetch_array($query)) {$data[$r['catid']] = $r['items'];}cache_write('cateitem-'.$moduleid.'.php', $data);}function update_item($catid, $items) {global $db;$items = intval($items);$db->query("UPDATE LOW_PRIORITY {$db->pre}category SET items=$items WHERE catid=$catid", 'UNBUFFERED');}function fix_link($url) {if(strlen($url) < 10) return '';return strpos($url, '://') === false? 'http://'.$url : $url;}function highlight($str) {return '<font class="red">'.$str.'</font>';}?>